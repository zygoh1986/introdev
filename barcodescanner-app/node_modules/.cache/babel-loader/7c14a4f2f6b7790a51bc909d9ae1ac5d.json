{"ast":null,"code":"//import {APIKEY, URL_PATH, URL_EXTENSION} from '../../assets/config'\nimport { db, auth } from \"../../assets/configOrg\";\nexport const startScanning = () => {\n  return {\n    type: \"START_SCANNING\"\n  };\n};\nexport const clearScanned = () => {\n  return {\n    type: 'CLEAR_SCANNED'\n  };\n};\nexport const setItem = i => {\n  return {\n    type: 'SET_ITEM',\n    payload: i\n  };\n};\nexport const deleteItem = i => {\n  return {\n    type: 'DELETE_ITEM',\n    payload: i\n  };\n};\nexport const processBarcode = barcode => {\n  return dispatch => {\n    dispatch(spinnerOn());\n    let url = \"https://barcode-50dd3.firebaseio.com/\" + barcode + \"/apikey=AIzaSyAt7f8tedZPATupmg6dC0BfNvIwNuGXR5g\"; //let url = URL_PATH + barcode + URL_EXTENSION + APIKEY\n\n    let req = new Request(url, {\n      headers: {\n        'Access-Control-Allow-Origin': 'http://localhost:3000'\n      },\n      mode: 'no-cors'\n    });\n    let product = null;\n    fetch(req).catch(err => console.log('error', err)).then(res => {\n      //console.log(res.status)\n      if (res.status !== 200) {\n        return {\n          resStatus: res.status\n        };\n      } else if (res.status === 200) {\n        return res.json();\n      }\n    }).then(parsedRes => {\n      //    if(parsedRes.resStatus !== 200){\n      //      parsedRes.resStatus === 0 ? dispatch(invalidBarcode('noAPI')) : dispatch(invalidBarcode('invalid'))\n      //      console.log(\"test\");\n      // } else {\n      product = {\n        componentDidMount() {\n          db.collection('data').get().then(snapshot => {\n            console.log(snapshot);\n          }).catch(error => console.log(error));\n        } //barcode_number: parsedRes.data[0].names,\n        //barcode_type: parsedRes.data[0].income,\n        // product_name: parsedRes.products[0].product_name,\n        // product_image: parsedRes.products[0].images[0],\n        // manufacturer: parsedRes.products[0].manufacturer,\n        // brand: parsedRes.products[0].brand,\n        // category: parsedRes.products[0].category,\n        // description: parsedRes.products[0].description,\n\n\n      };\n      dispatch(productDetected(product)); //} \n    });\n  };\n};\nexport const spinnerOn = () => {\n  return {\n    type: 'SPINNER_ON'\n  };\n};\nexport const productDetected = product => {\n  return {\n    type: 'PRODUCT_DETECTED',\n    payload: product\n  };\n};\nexport const invalidBarcode = err => {\n  let errText = err === 'noAPI' ? 'NO_API_KEY' : 'INVALID_BARCODE';\n  return {\n    type: errText\n  };\n};","map":{"version":3,"sources":["/Users/zhangyu/Documents/barcodescanner-app/barcodescanner-app/barcodescanner/src/store/actions/scannedItems.js"],"names":["db","auth","startScanning","type","clearScanned","setItem","i","payload","deleteItem","processBarcode","barcode","dispatch","spinnerOn","url","req","Request","headers","mode","product","fetch","catch","err","console","log","then","res","status","resStatus","json","parsedRes","componentDidMount","collection","get","snapshot","error","productDetected","invalidBarcode","errText"],"mappings":"AAAA;AAEA,SAASA,EAAT,EAAaC,IAAb,QAAyB,wBAAzB;AAGA,OAAO,MAAMC,aAAa,GAAG,MAAM;AAC/B,SAAO;AACLC,IAAAA,IAAI,EAAE;AADD,GAAP;AAGD,CAJI;AAML,OAAO,MAAMC,YAAY,GAAG,MAAM;AAChC,SAAO;AACLD,IAAAA,IAAI,EAAE;AADD,GAAP;AAGD,CAJM;AAMP,OAAO,MAAME,OAAO,GAAIC,CAAD,IAAO;AAC5B,SAAO;AACLH,IAAAA,IAAI,EAAE,UADD;AAELI,IAAAA,OAAO,EAAED;AAFJ,GAAP;AAID,CALM;AAOP,OAAO,MAAME,UAAU,GAAIF,CAAD,IAAO;AAC/B,SAAO;AACLH,IAAAA,IAAI,EAAE,aADD;AAELI,IAAAA,OAAO,EAAED;AAFJ,GAAP;AAID,CALM;AAOP,OAAO,MAAMG,cAAc,GAAIC,OAAD,IAAa;AACzC,SAAOC,QAAQ,IAAI;AACjBA,IAAAA,QAAQ,CAACC,SAAS,EAAV,CAAR;AAEA,QAAIC,GAAG,GAAG,0CAA0CH,OAA1C,GAAoD,iDAA9D,CAHiB,CAIjB;;AAEA,QAAII,GAAG,GAAG,IAAIC,OAAJ,CAAYF,GAAZ,EAAkB;AAC1BG,MAAAA,OAAO,EAAE;AACP,uCAA+B;AADxB,OADiB;AAI1BC,MAAAA,IAAI,EAAE;AAJoB,KAAlB,CAAV;AAOA,QAAIC,OAAO,GAAG,IAAd;AACAC,IAAAA,KAAK,CAACL,GAAD,CAAL,CACCM,KADD,CACOC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBF,GAArB,CADd,EAECG,IAFD,CAEMC,GAAG,IAAI;AACX;AACA,UAAGA,GAAG,CAACC,MAAJ,KAAe,GAAlB,EAAsB;AACpB,eAAO;AACLC,UAAAA,SAAS,EAAEF,GAAG,CAACC;AADV,SAAP;AAGD,OAJD,MAIO,IAAGD,GAAG,CAACC,MAAJ,KAAe,GAAlB,EAAuB;AAC5B,eAAOD,GAAG,CAACG,IAAJ,EAAP;AACD;AACF,KAXD,EAaEJ,IAbF,CAaOK,SAAS,IAAI;AACpB;AACA;AACA;AACA;AACIX,MAAAA,OAAO,GAAG;AAERY,QAAAA,iBAAiB,GACjB;AACE9B,UAAAA,EAAE,CAAC+B,UAAH,CAAc,MAAd,EACGC,GADH,GAEGR,IAFH,CAESS,QAAQ,IAAI;AACjBX,YAAAA,OAAO,CAACC,GAAR,CAAYU,QAAZ;AACD,WAJH,EAKGb,KALH,CAKUc,KAAK,IAAIZ,OAAO,CAACC,GAAR,CAAYW,KAAZ,CALnB;AAMD,SAVO,CAYR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAnBQ,OAAV;AAqBAvB,MAAAA,QAAQ,CAACwB,eAAe,CAACjB,OAAD,CAAhB,CAAR,CA1BgB,CA2BlB;AACD,KAzCD;AA0CD,GAxDD;AAyDC,CA1DI;AA4DP,OAAO,MAAMN,SAAS,GAAG,MAAM;AAC7B,SAAO;AACLT,IAAAA,IAAI,EAAE;AADD,GAAP;AAGD,CAJM;AAOP,OAAO,MAAMgC,eAAe,GAAIjB,OAAD,IAAa;AAC1C,SAAO;AACLf,IAAAA,IAAI,EAAE,kBADD;AAELI,IAAAA,OAAO,EAAEW;AAFJ,GAAP;AAID,CALM;AAOP,OAAO,MAAMkB,cAAc,GAAIf,GAAD,IAAS;AACrC,MAAIgB,OAAO,GAAGhB,GAAG,KAAK,OAAR,GAAkB,YAAlB,GAAiC,iBAA/C;AACA,SAAO;AACLlB,IAAAA,IAAI,EAAEkC;AADD,GAAP;AAGH,CALQ","sourcesContent":["//import {APIKEY, URL_PATH, URL_EXTENSION} from '../../assets/config'\n\nimport { db, auth } from \"../../assets/configOrg\"\n\n\nexport const startScanning = () => {\n    return {\n      type: \"START_SCANNING\"\n    }\n  }\n  \n  export const clearScanned = () => {\n    return {\n      type: 'CLEAR_SCANNED'\n    }\n  }\n  \n  export const setItem = (i) => {\n    return {\n      type: 'SET_ITEM',\n      payload: i\n    }\n  }\n  \n  export const deleteItem = (i) => {\n    return {\n      type: 'DELETE_ITEM',\n      payload: i\n    }\n  }\n  \n  export const processBarcode = (barcode) => {\n    return dispatch => {\n      dispatch(spinnerOn())\n      \n      let url = \"https://barcode-50dd3.firebaseio.com/\" + barcode + \"/apikey=AIzaSyAt7f8tedZPATupmg6dC0BfNvIwNuGXR5g\"\n      //let url = URL_PATH + barcode + URL_EXTENSION + APIKEY\n      \n      let req = new Request(url , {\n        headers: {\n          'Access-Control-Allow-Origin': 'http://localhost:3000'\n        },\n        mode: 'no-cors'\n      })\n      \n      let product = null\n      fetch(req)\n      .catch(err => console.log('error', err))\n      .then(res => {\n        //console.log(res.status)\n        if(res.status !== 200){\n          return {\n            resStatus: res.status\n          }\n        } else if(res.status === 200) {\n          return res.json()\n        }\n      })\n\n       .then(parsedRes => {\n      //    if(parsedRes.resStatus !== 200){\n      //      parsedRes.resStatus === 0 ? dispatch(invalidBarcode('noAPI')) : dispatch(invalidBarcode('invalid'))\n      //      console.log(\"test\");\n      // } else {\n          product = {\n\n            componentDidMount()\n            {\n              db.collection('data')\n                .get()\n                .then (snapshot => {\n                  console.log(snapshot)\n                })\n                .catch (error => console.log(error))\n            }\n\n            //barcode_number: parsedRes.data[0].names,\n            //barcode_type: parsedRes.data[0].income,\n            // product_name: parsedRes.products[0].product_name,\n            // product_image: parsedRes.products[0].images[0],\n            // manufacturer: parsedRes.products[0].manufacturer,\n            // brand: parsedRes.products[0].brand,\n            // category: parsedRes.products[0].category,\n            // description: parsedRes.products[0].description,\n          }\n          dispatch(productDetected(product))\n        //} \n      })\n    }\n    }\n  \n  export const spinnerOn = () => {\n    return {\n      type: 'SPINNER_ON'\n    }\n  }\n    \n    \n  export const productDetected = (product) => {\n    return {\n      type: 'PRODUCT_DETECTED',\n      payload: product\n    }\n  }\n  \n  export const invalidBarcode = (err) => {\n    let errText = err === 'noAPI' ? 'NO_API_KEY' : 'INVALID_BARCODE'\n    return {\n      type: errText,\n    }\n}\n"]},"metadata":{},"sourceType":"module"}